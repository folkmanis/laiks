<table mat-table [dataSource]="powerCycles.controls">

    <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let control; index as idx;">
            {{ idx + 1 }}.
        </td>
        <td mat-footer-cell *matFooterCellDef>
            <mat-icon>
                functions
            </mat-icon>
        </td>
    </ng-container>

    <ng-container matColumnDef="length">
        <th mat-header-cell *matHeaderCellDef>
            Ilgums (minūtes)
        </th>
        <td mat-cell *matCellDef="let control;">
            <input matInput laiksInput type="number" [formControl]="control.controls.length">
        </td>
        <td mat-footer-cell *matFooterCellDef>
            <ng-container *ngIf="powerCycles.valid">
                {{ getTotals(powerCycles.value).length | minutesToHours }}
            </ng-container>
        </td>
    </ng-container>

    <ng-container matColumnDef="consumption">
        <th mat-header-cell *matHeaderCellDef>
            Patēriņš (W)
        </th>
        <td mat-cell *matCellDef="let control;">
            <input matInput laiksInput type="number" [formControl]="control.controls.consumption">
        </td>
        <td mat-footer-cell *matFooterCellDef>
            <ng-container *ngIf="powerCycles.valid">
                {{ getTotals(powerCycles.value).consumption / 1000 | number : '1.1-1' }} kWh
            </ng-container>
        </td>
    </ng-container>

    <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let control; index as idx;">
            <button mat-icon-button type="button" (click)="onAddCycle(idx)">
                <mat-icon>
                    add
                </mat-icon>
            </button>
            <button mat-icon-button type="button" (click)="onDeleteCycle(idx)">
                <mat-icon>
                    delete
                </mat-icon>
            </button>
        </td>
        <td mat-footer-cell *matFooterCellDef>
            <button mat-icon-button type="button" (click)="onAddCycle(powerCycles.length)">
                <mat-icon>
                    add
                </mat-icon>
            </button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let control; columns: displayedColumns"></tr>
    <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>

</table>