@if (user) {

<span>

    <button mat-icon-button [matMenuTriggerFor]="userMenu">
        @if (user.photoURL; as photo) {
        <img [src]="photo">
        } @else {
        <mat-icon>
            account_circle
        </mat-icon>
        }

    </button>

    <mat-menu #userMenu>

        <a mat-menu-item routerLink="user-settings">
            {{ laiksUser?.name || user.displayName }}
        </a>

        @if (isNpAllowed) {
        <a mat-menu-item routerLink="/prices">
            Cenas
        </a>
        <a mat-menu-item [routerLink]="['user-settings', 'appliances']">
            Mani aparāti
        </a>
        }

        @if (isAdmin) {
        <button mat-menu-item [mat-menu-trigger-for]="adminMenu">
            Sistēmas Iestatījumi
        </button>
        }


        <a mat-menu-item routerLink="/privacy-politics">
            Privātuma politika
        </a>

        <button mat-menu-item (click)="logout.next()">
            Atslēgties
        </button>

    </mat-menu>

    <mat-menu #adminMenu>
        <a mat-menu-item routerLink="/admin/users">
            Lietotāji
        </a>
        <a mat-menu-item routerLink="/admin/appliances">
            Elektroiekārtas
        </a>
        <a mat-menu-item routerLink="/admin/market-zones">
            Tirgus reģioni
        </a>
    </mat-menu>

</span>

} @else {

<span>
    <button mat-icon-button [matMenuTriggerFor]="noUserMenu">
        <mat-icon>account_circle</mat-icon>
    </button>
</span>

<mat-menu #noUserMenu>
    <a mat-menu-item routerLink="/login">
        Pieslēgties
    </a>
    <a mat-menu-item routerLink="/privacy-politics">
        Privātuma politika
    </a>
</mat-menu>

}